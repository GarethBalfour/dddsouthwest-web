version: '2'
services:

  identityserver:
      build:
        context: .
        dockerfile: identityserver.dockerfile
      container_name: ddd-southwest-identityserver
      image: ddd_southwest_identityserver
      environment:
        - ASPNETCORE_ENVIRONMENT=Development
        - DDDSouthWestIdentityServer__WebsiteUrl=http://website:5002
      ports:
        - "5000:5000"

  website:
      build:
        context: .
        dockerfile: website.dockerfile
      depends_on:
        - identityserver
      container_name: ddd-southwest-website
      image: ddd_southwest_website
      environment:
        - ASPNETCORE_ENVIRONMENT=Development
        - DDDSouthWestWebsite__IdentityServer__AuthorityServer=http://identityserver:5000
      ports:
        - "5002:5002"
      links: 
        - identityserver